<!DOCTYPE html>
<html>
<head>
<title>Online Test</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h2 { text-align: center; }
    .question { margin-bottom: 15px; padding: 10px; border: 1px solid #ccc; border-radius: 8px; }
    button { padding: 10px 15px; background: green; color: white; border: none; cursor: pointer; border-radius: 5px; }
    button:hover { background: darkgreen; }
    .timer { font-weight: bold; color: red; text-align: right; }
</style>
</head>
<body>

<h2>Sample Online Test</h2>
<p>Fill in your details before starting:</p>
<label>Name: </label><input type="text" id="name"><br><br>
<label>Roll Number: </label><input type="text" id="roll"><br><br>

<div class="timer">Time left: <span id="time">10:00</span></div>

<div id="quiz">
    <!-- Sample Questions -->
    <div class="question">
        1. What is 2 + 2?<br>
        <input type="radio" name="q1" value="4">4<br>
        <input type="radio" name="q1" value="3">3<br>
        <input type="radio" name="q1" value="5">5<br>
        <input type="radio" name="q1" value="6">6
    </div>
    <div class="question">
        2. Capital of India?<br>
        <input type="radio" name="q2" value="New Delhi">New Delhi<br>
        <input type="radio" name="q2" value="Mumbai">Mumbai<br>
        <input type="radio" name="q2" value="Kolkata">Kolkata<br>
        <input type="radio" name="q2" value="Chennai">Chennai
    </div>
    <div class="question">
        3. HTML stands for?<br>
        <input type="radio" name="q3" value="Hyper Text Markup Language">Hyper Text Markup Language<br>
        <input type="radio" name="q3" value="Home Tool Markup Language">Home Tool Markup Language<br>
        <input type="radio" name="q3" value="Hyperlinks Text Mark Language">Hyperlinks Text Mark Language<br>
        <input type="radio" name="q3" value="None">None
    </div>
    <div class="question">
        4. Largest planet?<br>
        <input type="radio" name="q4" value="Jupiter">Jupiter<br>
        <input type="radio" name="q4" value="Saturn">Saturn<br>
        <input type="radio" name="q4" value="Earth">Earth<br>
        <input type="radio" name="q4" value="Mars">Mars
    </div>
    <div class="question">
        5. Which is not a programming language?<br>
        <input type="radio" name="q5" value="Python">Python<br>
        <input type="radio" name="q5" value="Java">Java<br>
        <input type="radio" name="q5" value="HTML">HTML<br>
        <input type="radio" name="q5" value="C++">C++
    </div>
    <div class="question">
        6. The boiling point of water?<br>
        <input type="radio" name="q6" value="100">100°C<br>
        <input type="radio" name="q6" value="90">90°C<br>
        <input type="radio" name="q6" value="80">80°C<br>
        <input type="radio" name="q6" value="110">110°C
    </div>
    <div class="question">
        7. 5 × 5 = ?<br>
        <input type="radio" name="q7" value="25">25<br>
        <input type="radio" name="q7" value="20">20<br>
        <input type="radio" name="q7" value="15">15<br>
        <input type="radio" name="q7" value="30">30
    </div>
    <div class="question">
        8. Which is a web browser?<br>
        <input type="radio" name="q8" value="Chrome">Chrome<br>
        <input type="radio" name="q8" value="Windows">Windows<br>
        <input type="radio" name="q8" value="Linux">Linux<br>
        <input type="radio" name="q8" value="Mac">Mac
    </div>
    <div class="question">
        9. 1 GB = ? MB<br>
        <input type="radio" name="q9" value="1024">1024<br>
        <input type="radio" name="q9" value="1000">1000<br>
        <input type="radio" name="q9" value="500">500<br>
        <input type="radio" name="q9" value="2048">2048
    </div>
    <div class="question">
        10. Which is used to style web pages?<br>
        <input type="radio" name="q10" value="CSS">CSS<br>
        <input type="radio" name="q10" value="HTML">HTML<br>
        <input type="radio" name="q10" value="JavaScript">JavaScript<br>
        <input type="radio" name="q10" value="Python">Python
    </div>
</div>

<br>
<button onclick="submitTest()">Submit Test</button>

<script>
const correctAnswers = {
    q1: "4",
    q2: "New Delhi",
    q3: "Hyper Text Markup Language",
    q4: "Jupiter",
    q5: "HTML",
    q6: "100",
    q7: "25",
    q8: "Chrome",
    q9: "1024",
    q10: "CSS"
};

const scriptURL = "https://script.google.com/macros/s/AKfycbwU9EQdAJMAawYA6sT0egXJ60mk43cTaCC2iRisSnLJiCRXcoQYISqmtmnAijQsIgUeUQ/exec"; 
// Timer
let timeLeft = 600;
const timer = setInterval(() => {
    let minutes = Math.floor(timeLeft / 60);
    let seconds = timeLeft % 60;
    document.getElementById("time").textContent =
        `${minutes}:${seconds < 10 ? "0" : ""}${seconds}`;
    timeLeft--;
    if (timeLeft < 0) {
        clearInterval(timer);
        submitTest();
    }
}, 1000);

// Anti-minimize detection
document.addEventListener("visibilitychange", () => {
    if (document.hidden) {
        alert("You minimized/switched tabs. Test submitted automatically!");
        submitTest();
    }
});

function submitTest() {
    clearInterval(timer);
    let score = 0;
    for (let key in correctAnswers) {
        let selected = document.querySelector(`input[name="${key}"]:checked`);
        if (selected && selected.value === correctAnswers[key]) {
            score++;
        }
    }

    let name = document.getElementById("name").value.trim();
    let roll = document.getElementById("roll").value.trim();

    if (!name || !roll) {
        alert("Please enter your Name and Roll Number!");
        return;
    }

    fetch(scriptURL, {
        method: 'POST',
        mode: 'no-cors',
        body: JSON.stringify({ name: name, rollNumber: roll, score: score })
    });

    alert(`Test Submitted!\nYour Score: ${score}/10`);
    window.location.reload();
}
</script>

</body>
</html>
